var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(t){let e;return o(t,t=>e=t)(),e}function l(t,e,n){t.$$.on_destroy.push(o(e,n))}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function x(t,e,n){t.classList[n?"add":"remove"](e)}let k;function b(t){k=t}function y(){const t=function(){if(!k)throw new Error("Function called outside component initialization");return k}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,s)})}}}const z=[],M=[],E=[],C=[],T=Promise.resolve();let _=!1;function L(t){E.push(t)}let j=!1;const q=new Set;function I(){if(!j){j=!0;do{for(let t=0;t<z.length;t+=1){const e=z[t];b(e),S(e.$$)}for(z.length=0;M.length;)M.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];q.has(e)||(q.add(e),e())}E.length=0}while(z.length);for(;C.length;)C.pop()();_=!1,j=!1,q.clear()}}function S(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const A=new Set;let N;function B(){N={r:0,c:[],p:N}}function O(){N.r||r(N.c),N=N.p}function R(t,e){t&&t.i&&(A.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(A.has(t))return;A.add(t),N.c.push(()=>{A.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function H(t,e){F(t,1,1,()=>{e.delete(t.key)})}function V(t){t&&t.c()}function J(t,n,c){const{fragment:o,on_mount:i,on_destroy:l,after_update:u}=t.$$;o&&o.m(n,c),L(()=>{const n=i.map(e).filter(s);l?l.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(L)}function U(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(z.push(t),_||(_=!0,T.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,s,c,o,i,l,u=[-1]){const a=k;b(e);const d=s.props||{},h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u};let p=!1;if(h.ctx=c?c(e,d,(t,n,...r)=>{const s=r.length?r[0]:n;return h.ctx&&i(h.ctx[t],h.ctx[t]=s)&&(h.bound[t]&&h.bound[t](s),p&&D(e,t)),n}):[],h.update(),p=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);h.fragment&&h.fragment.l(t),t.forEach(f)}else h.fragment&&h.fragment.c();s.intro&&R(e.$$.fragment),J(e,s.target,s.anchor),I()}b(a)}class W{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const G=[];function K(e,n=t){let r;const s=[];function o(t){if(c(e,t)&&(e=t,r)){const t=!G.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),G.push(n,e)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(c,i=t){const l=[c,i];return s.push(l),1===s.length&&(r=n(o)||t),c(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(r(),r=null)}}}}function Q(e,n,c){const i=!Array.isArray(e),l=i?[e]:e,u=n.length<2;return{subscribe:K(c,e=>{let c=!1;const a=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(i?a[0]:a,e);u?e(r):d=s(r)?r:t},p=l.map((t,e)=>o(t,t=>{a[e]=t,f&=~(1<<e),c&&h()},()=>{f|=1<<e}));return c=!0,h(),function(){r(p),d()}}).subscribe}}let X=0;var Y=function(){const t=K([]),{subscribe:e,set:n,update:r}=t,s=Q(t,t=>t.filter(t=>t.enabled));function c(e){const n=i(t).filter(t=>t.time<=e.currentTime);return n[n.length-1]}return{subscribe:e,set:n,add(t,e=""){r(n=>[...n,{id:X++,time:t,enabled:!1,text:e}].sort((t,e)=>t.time-e.time))},remove(t){r(e=>e.filter(e=>e.id!==t))},enabledMarkers:s,getLoopRanges:function(e){const n=i(s);return n.length?n.map(n=>function(e,n){const r=i(t),s=r.findIndex(t=>t.id===e);if(-1===s)throw new Error("[getMarkerRange] Wrong markerId.");const c=s===r.length-1?n.duration:r[s+1].time;return[r[s].time,c]}(n.id,e)):[[0,e.duration]]},getCurrentMarker:c,isCurrentMarker(t,e){const n=c(t);return!!n&&n.id===e.id}}}();var Z=function(){const t=K(null),{subscribe:e,set:n,update:r}=t;let s,c;function o(){s&&clearTimeout(s)}return{paused:Q(t,t=>!t||t.paused),subscribe:e,update:r,reset(){const e=i(t);e&&e.pause(),c&&(c(),c=null),n(null)},set(t){const e=()=>n(t);t.addEventListener("loadedmetadata",e),t.addEventListener("timeupdate",e),c=()=>{t.removeEventListener("loadedmetadata",e),t.removeEventListener("timeupdate",e)}},play(){const e=i(t);e&&(e.play(),o())},playFromMarker(e){i(t).currentTime=e.time,this.play()},pause(){const e=i(t);e&&(e.pause(),o())},loop(e,n){const r=i(t);r&&(o(),r.currentTime=e,r.play(),s=setTimeout(()=>{s=null,this.loop(e,n)},1e3*(n-e)))}}}();function tt(e){let n,r,s,c;return{c(){n=h("svg"),r=h("path"),s=h("path"),$(r,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),$(s,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",c="feather feather-edit "+e[1])},m(t,e){a(t,n,e),u(n,r),u(n,s)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&c!==(c="feather feather-edit "+t[1])&&$(n,"class",c)},i:t,o:t,d(t){t&&f(n)}}}function et(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class nt extends W{constructor(t){super(),P(this,t,et,tt,c,{size:0,class:1})}}function rt(e){let n,r,s,c;return{c(){n=h("svg"),r=h("rect"),s=h("rect"),$(r,"x","6"),$(r,"y","4"),$(r,"width","4"),$(r,"height","16"),$(s,"x","14"),$(s,"y","4"),$(s,"width","4"),$(s,"height","16"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",c="feather feather-pause "+e[1])},m(t,e){a(t,n,e),u(n,r),u(n,s)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&c!==(c="feather feather-pause "+t[1])&&$(n,"class",c)},i:t,o:t,d(t){t&&f(n)}}}function st(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class ct extends W{constructor(t){super(),P(this,t,st,rt,c,{size:0,class:1})}}function ot(e){let n,r,s;return{c(){n=h("svg"),r=h("polygon"),$(r,"points","5 3 19 12 5 21 5 3"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",s="feather feather-play "+e[1])},m(t,e){a(t,n,e),u(n,r)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&s!==(s="feather feather-play "+t[1])&&$(n,"class",s)},i:t,o:t,d(t){t&&f(n)}}}function it(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class lt extends W{constructor(t){super(),P(this,t,it,ot,c,{size:0,class:1})}}function ut(e){let n,r,s,c,o,i;return{c(){n=h("svg"),r=h("polyline"),s=h("path"),c=h("polyline"),o=h("path"),$(r,"points","17 1 21 5 17 9"),$(s,"d","M3 11V9a4 4 0 0 1 4-4h14"),$(c,"points","7 23 3 19 7 15"),$(o,"d","M21 13v2a4 4 0 0 1-4 4H3"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",i="feather feather-repeat "+e[1])},m(t,e){a(t,n,e),u(n,r),u(n,s),u(n,c),u(n,o)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&i!==(i="feather feather-repeat "+t[1])&&$(n,"class",i)},i:t,o:t,d(t){t&&f(n)}}}function at(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class ft extends W{constructor(t){super(),P(this,t,at,ut,c,{size:0,class:1})}}function dt(e){let n,r,s,c,o,i;return{c(){n=h("svg"),r=h("polyline"),s=h("path"),c=h("line"),o=h("line"),$(r,"points","3 6 5 6 21 6"),$(s,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),$(c,"x1","10"),$(c,"y1","11"),$(c,"x2","10"),$(c,"y2","17"),$(o,"x1","14"),$(o,"y1","11"),$(o,"x2","14"),$(o,"y2","17"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",i="feather feather-trash-2 "+e[1])},m(t,e){a(t,n,e),u(n,r),u(n,s),u(n,c),u(n,o)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&i!==(i="feather feather-trash-2 "+t[1])&&$(n,"class",i)},i:t,o:t,d(t){t&&f(n)}}}function ht(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class pt extends W{constructor(t){super(),P(this,t,ht,dt,c,{size:0,class:1})}}function mt(e){let n,r,s,c;return{c(){n=h("svg"),r=h("line"),s=h("line"),$(r,"x1","18"),$(r,"y1","6"),$(r,"x2","6"),$(r,"y2","18"),$(s,"x1","6"),$(s,"y1","6"),$(s,"x2","18"),$(s,"y2","18"),$(n,"xmlns","http://www.w3.org/2000/svg"),$(n,"width",e[0]),$(n,"height",e[0]),$(n,"fill","none"),$(n,"viewBox","0 0 24 24"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(n,"class",c="feather feather-x "+e[1])},m(t,e){a(t,n,e),u(n,r),u(n,s)},p(t,[e]){1&e&&$(n,"width",t[0]),1&e&&$(n,"height",t[0]),2&e&&c!==(c="feather feather-x "+t[1])&&$(n,"class",c)},i:t,o:t,d(t){t&&f(n)}}}function gt(t,e,n){let{size:r="100%"}=e,{class:s=""}=e;return"100%"!==r&&(r="x"===r.slice(-1)?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),t.$set=t=>{"size"in t&&n(0,r=t.size),"class"in t&&n(1,s=t.class)},[r,s]}class $t extends W{constructor(t){super(),P(this,t,gt,mt,c,{size:0,class:1})}}function vt(t,e=!1){const n=Math.floor(t/60/60),r=Math.floor((t-60*n*60)/60),s=Math.floor(t-60*r-60*n*60),c=Math.floor(1e3*(t-(s+60*r-60*n*60))),o=(t,e=2)=>t.toString().padStart(e,"0");let i="";return n&&(i+=o(n)+":"),(n?o(n)+":":"")+o(r)+":"+o(s)+(e?"."+o(c,3):"")}var wt=function(){let t,e,n;const r=K(!1),{subscribe:s,set:c}=r;function o(){t&&clearTimeout(t),n&&(n(),n=null)}function l(t,e){const[n,r]=e;t.currentTime>=n&&t.currentTime<r||(t.currentTime=n)}return{subscribe:s,toggle(){i(r)?this.stop():this.start()},start(){c(!0);const r=i(Z);e=Z.paused.subscribe(e=>{if(e)return o();n=Y.subscribe(()=>function e(n){o();const r=Y.getCurrentMarker(n),s=Y.getLoopRanges(n),c=r&&r.enabled?s.findIndex(t=>t[0]==r.time):0,[i,u]=s[c],a=c===s.length-1?0:c+1;l(n,s[c]),t=setTimeout(()=>{t=null,l(n,s[a]),e(n)},1e3*(u-n.currentTime))}(r))})},stop(){c(!1),o(),e&&(e(),e=null)}}}();function xt(e){let n,r,s;const c=new ct({props:{size:"18"}});return{c(){n=d("button"),V(c.$$.fragment),$(n,"class","svelte-1h1qdu6")},m(t,o,i){a(t,n,o),J(c,n,null),r=!0,i&&s(),s=g(n,"click",e[10])},p:t,i(t){r||(R(c.$$.fragment,t),r=!0)},o(t){F(c.$$.fragment,t),r=!1},d(t){t&&f(n),U(c),s()}}}function kt(e){let n,r,s;const c=new lt({props:{size:"18"}});return{c(){n=d("button"),V(c.$$.fragment),$(n,"class","svelte-1h1qdu6")},m(t,o,i){a(t,n,o),J(c,n,null),r=!0,i&&s(),s=g(n,"click",e[9])},p:t,i(t){r||(R(c.$$.fragment,t),r=!0)},o(t){F(c.$$.fragment,t),r=!1},d(t){t&&f(n),U(c),s()}}}function bt(t){let e,n,s,c,o,i,l,h,w,k,b,y,z,M,E,C,T,_;const L=[kt,xt],j=[];function q(t,e){return t[2]?0:1}h=q(t),w=j[h]=L[h](t);const I=new ft({props:{size:"18"}}),S=new $t({props:{size:"18"}});return{c(){e=d("div"),n=d("span"),s=p(t[3]),c=p(" / "),o=p(t[4]),i=m(),l=d("span"),w.c(),k=m(),b=d("button"),V(I.$$.fragment),y=m(),z=d("input"),E=m(),C=d("button"),V(S.$$.fragment),$(n,"class","col-sm-4 col-lg-1 svelte-1h1qdu6"),$(b,"class","svelte-1h1qdu6"),x(b,"active",t[5]),$(l,"class","col-sm-5 col-lg-2 svelte-1h1qdu6"),$(z,"class","col-sm-first col-lg-normal col-lg-8 col-sm-12 svelte-1h1qdu6"),$(z,"type","range"),$(z,"min",M=0),$(z,"max",t[1]),z.value=t[0],$(C,"class","col-lg-1 col-sm-2 col-md-offset-5 col-lg-offset-0 svelte-1h1qdu6"),$(e,"class","player row svelte-1h1qdu6")},m(f,d,p){a(f,e,d),u(e,n),u(n,s),u(n,c),u(n,o),u(e,i),u(e,l),j[h].m(l,null),u(l,k),u(l,b),J(I,b,null),u(e,y),u(e,z),u(e,E),u(e,C),J(S,C,null),T=!0,p&&r(_),_=[g(b,"click",t[11]),g(z,"input",t[7]),g(C,"click",t[12])]},p(t,[e]){(!T||8&e)&&v(s,t[3]),(!T||16&e)&&v(o,t[4]);let n=h;h=q(t),h===n?j[h].p(t,e):(B(),F(j[n],1,1,()=>{j[n]=null}),O(),w=j[h],w||(w=j[h]=L[h](t),w.c()),R(w,1),w.m(l,k)),32&e&&x(b,"active",t[5]),(!T||2&e)&&$(z,"max",t[1]),(!T||1&e)&&(z.value=t[0])},i(t){T||(R(w),R(I.$$.fragment,t),R(S.$$.fragment,t),T=!0)},o(t){F(w),F(I.$$.fragment,t),F(S.$$.fragment,t),T=!1},d(t){t&&f(e),j[h].d(),U(I),U(S),r(_)}}}function yt(t,e,n){let r,s;l(t,Z,t=>n(8,r=t)),l(t,wt,t=>n(5,s=t));const c=y();let o,i,u,a,f;return t.$$.update=()=>{256&t.$$.dirty&&n(0,o=r&&r.currentTime),256&t.$$.dirty&&n(1,i=r&&r.duration),256&t.$$.dirty&&n(2,u=r&&r.paused),1&t.$$.dirty&&n(3,a=vt(o)),2&t.$$.dirty&&n(4,f=vt(i))},[o,i,u,a,f,s,c,function(t){const e=t.target.value;!function(t,e,n=e){t.set(n)}(Z,r.currentTime=e,r)},r,()=>Z.play(),()=>Z.pause(),()=>wt.toggle(),()=>c("reset")]}class zt extends W{constructor(t){super(),P(this,t,yt,bt,c,{})}}function Mt(e){let n,s,c,o,i;return{c(){n=d("div"),s=d("button"),s.textContent="Choisir un fichier",c=m(),o=d("input"),$(s,"class","primary"),$(o,"type","file"),$(o,"accept",".mp3"),$(o,"class","svelte-ozz7bt"),$(n,"class","file-picker svelte-ozz7bt")},m(t,l,f){a(t,n,l),u(n,s),u(n,c),u(n,o),e[3](o),f&&r(i),i=[g(s,"click",e[2]),g(o,"change",e[4])]},p:t,i:t,o:t,d(t){t&&f(n),e[3](null),r(i)}}}function Et(t,e,n){let r;const s=y();return[r,s,()=>r.click(),function(t){M[t?"unshift":"push"](()=>{n(0,r=t)})},t=>s("file",t.target.files[0])]}class Ct extends W{constructor(t){super(),P(this,t,Et,Mt,c,{})}}function Tt(t,e,n){const r=t.slice();return r[11]=e[n],r[12]=e,r[13]=n,r}function _t(t){let e,n,r,s,c,o,i,l=[],h=new Map;const v=new nt({props:{size:"18"}});let w=t[1];const x=t=>t[11].id;for(let e=0;e<w.length;e+=1){let n=Tt(t,w,e),r=x(n);h.set(r,l[e]=Nt(r,n))}return{c(){e=d("h2"),n=p("Marqueurs :\n        "),r=d("button"),V(v.$$.fragment),s=m();for(let t=0;t<l.length;t+=1)l[t].c();c=p(""),$(r,"class","no-background svelte-39cmsh")},m(f,d,h){a(f,e,d),u(e,n),u(e,r),J(v,r,null),a(f,s,d);for(let t=0;t<l.length;t+=1)l[t].m(f,d);a(f,c,d),o=!0,h&&i(),i=g(r,"click",t[4])},p(t,e){if(15&e){const n=t[1];B(),l=function(t,e,n,r,s,c,o,i,l,u,a,f){let d=t.length,h=c.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],$=new Map,v=new Map;for(p=h;p--;){const t=f(s,c,p),i=n(t);let l=o.get(i);l?r&&l.p(t,e):(l=u(i,t),l.c()),$.set(i,g[p]=l),i in m&&v.set(i,Math.abs(p-m[i]))}const w=new Set,x=new Set;function k(t){R(t,1),t.m(i,a,o.has(t.key)),o.set(t.key,t),a=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],r=e.key,s=n.key;e===n?(a=e.first,d--,h--):$.has(s)?!o.has(r)||w.has(r)?k(e):x.has(s)?d--:v.get(r)>v.get(s)?(x.add(r),k(e)):(w.add(s),d--):(l(n,o),d--)}for(;d--;){const e=t[d];$.has(e.key)||l(e,o)}for(;h;)k(g[h-1]);return g}(l,e,x,1,t,n,h,c.parentNode,H,Nt,c,Tt),O()}},i(t){if(!o){R(v.$$.fragment,t);for(let t=0;t<w.length;t+=1)R(l[t]);o=!0}},o(t){F(v.$$.fragment,t);for(let t=0;t<l.length;t+=1)F(l[t]);o=!1},d(t){t&&f(e),U(v),t&&f(s);for(let e=0;e<l.length;e+=1)l[e].d(t);t&&f(c),i()}}}function Lt(t){let e,n;function r(){t[5].call(e,t[11])}return{c(){e=d("input"),$(e,"type","checkbox")},m(s,c,o){a(s,e,c),e.checked=t[11].enabled,o&&n(),n=g(e,"change",r)},p(n,r){t=n,2&r&&(e.checked=t[11].enabled)},d(t){t&&f(e),n()}}}function jt(t){let e,n,r,s=vt(t[11].time)+"";function c(...e){return t[6](t[11],...e)}return{c(){e=d("span"),n=p(s),$(e,"class","marker-time clickable svelte-39cmsh")},m(t,s,o){a(t,e,s),u(e,n),o&&r(),r=g(e,"click",c)},p(e,r){t=e,2&r&&s!==(s=vt(t[11].time)+"")&&v(n,s)},d(t){t&&f(e),r()}}}function qt(t){let e,n,r=vt(t[11].time,!0)+"";return{c(){e=d("span"),n=p(r),$(e,"class","marker-time svelte-39cmsh")},m(t,r){a(t,e,r),u(e,n)},p(t,e){2&e&&r!==(r=vt(t[11].time,!0)+"")&&v(n,r)},d(t){t&&f(e)}}}function It(t){let e,n,r,s=(t[11].text||"Aucun titre")+"";function c(...e){return t[8](t[11],...e)}return{c(){e=d("span"),n=p(s),$(e,"class","clickable svelte-39cmsh")},m(t,s,o){a(t,e,s),u(e,n),o&&r(),r=g(e,"click",c)},p(e,r){t=e,2&r&&s!==(s=(t[11].text||"Aucun titre")+"")&&v(n,s)},d(t){t&&f(e),r()}}}function St(t){let e,n;function r(){t[7].call(e,t[11])}return{c(){e=d("input"),$(e,"type","text"),$(e,"class","col-sm-6"),$(e,"placeholder","Description...")},m(s,c,o){a(s,e,c),w(e,t[11].text),o&&n(),n=g(e,"input",r)},p(n,r){t=n,2&r&&e.value!==t[11].text&&w(e,t[11].text)},d(t){t&&f(e),n()}}}function At(t){let e,n,r;const s=new pt({props:{size:"18"}});function c(...e){return t[9](t[11],...e)}return{c(){e=d("button"),V(s.$$.fragment),$(e,"class","no-background svelte-39cmsh")},m(t,o,i){a(t,e,o),J(s,e,null),n=!0,i&&r(),r=g(e,"click",c)},p(e,n){t=e},i(t){n||(R(s.$$.fragment,t),n=!0)},o(t){F(s.$$.fragment,t),n=!1},d(t){t&&f(e),U(s),r()}}}function Nt(t,e){let n,r,s,c,o,i,l=!e[0]&&Lt(e);function h(t,e){return t[0]?qt:jt}let p=h(e),g=p(e);function v(t,e){return t[0]?St:It}let w=v(e),k=w(e),b=e[0]&&At(e);return{key:t,first:null,c(){n=d("div"),l&&l.c(),r=m(),g.c(),s=m(),k.c(),c=m(),b&&b.c(),o=m(),$(n,"class","row svelte-39cmsh"),x(n,"editMode",e[0]),x(n,"active",Y.isCurrentMarker(e[2],e[11])),this.first=n},m(t,e){a(t,n,e),l&&l.m(n,null),u(n,r),g.m(n,null),u(n,s),k.m(n,null),u(n,c),b&&b.m(n,null),u(n,o),i=!0},p(t,e){t[0]?l&&(l.d(1),l=null):l?l.p(t,e):(l=Lt(t),l.c(),l.m(n,r)),p===(p=h(t))&&g?g.p(t,e):(g.d(1),g=p(t),g&&(g.c(),g.m(n,s))),w===(w=v(t))&&k?k.p(t,e):(k.d(1),k=w(t),k&&(k.c(),k.m(n,c))),t[0]?b?(b.p(t,e),R(b,1)):(b=At(t),b.c(),R(b,1),b.m(n,o)):b&&(B(),F(b,1,1,()=>{b=null}),O()),1&e&&x(n,"editMode",t[0]),6&e&&x(n,"active",Y.isCurrentMarker(t[2],t[11]))},i(t){i||(R(b),i=!0)},o(t){F(b),i=!1},d(t){t&&f(n),l&&l.d(),g.d(),k.d(),b&&b.d()}}}function Bt(t){let e,n,r,s,c,o=t[1].length&&_t(t);return{c(){o&&o.c(),e=m(),n=d("div"),r=d("button"),r.textContent="Ajouter un marqueur",$(n,"class","add-marker svelte-39cmsh")},m(i,l,f){o&&o.m(i,l),a(i,e,l),a(i,n,l),u(n,r),s=!0,f&&c(),c=g(r,"click",t[10])},p(t,[n]){t[1].length?o?(o.p(t,n),R(o,1)):(o=_t(t),o.c(),R(o,1),o.m(e.parentNode,e)):o&&(B(),F(o,1,1,()=>{o=null}),O())},i(t){s||(R(o),s=!0)},o(t){F(o),s=!1},d(t){o&&o.d(t),t&&f(e),t&&f(n),c()}}}function Ot(t,e,n){let r,s;l(t,Y,t=>n(1,r=t)),l(t,Z,t=>n(2,s=t));let c=!1;const o=y();return[c,r,s,o,()=>{n(0,c=!c)},function(t){t.enabled=this.checked,Y.set(r)},t=>o("play",t),function(t){t.text=this.value,Y.set(r)},t=>o("play",t),t=>Y.remove(t.id),()=>o("addMarker")]}class Rt extends W{constructor(t){super(),P(this,t,Ot,Bt,c,{})}}function Ft(e){let n;const r=new Ct({});return r.$on("file",e[1]),{c(){V(r.$$.fragment)},m(t,e){J(r,t,e),n=!0},p:t,i(t){n||(R(r.$$.fragment,t),n=!0)},o(t){F(r.$$.fragment,t),n=!1},d(t){U(r,t)}}}function Ht(e){let n,r;const s=new zt({});s.$on("reset",e[2]);const c=new Rt({});return c.$on("play",e[8]),c.$on("addMarker",e[3]),{c(){V(s.$$.fragment),n=m(),V(c.$$.fragment)},m(t,e){J(s,t,e),a(t,n,e),J(c,t,e),r=!0},p:t,i(t){r||(R(s.$$.fragment,t),R(c.$$.fragment,t),r=!0)},o(t){F(s.$$.fragment,t),F(c.$$.fragment,t),r=!1},d(t){U(s,t),t&&f(n),U(c,t)}}}function Vt(t){let e,n,r,s;const c=[Ht,Ft],o=[];function i(t,e){return t[0]?0:1}return n=i(t),r=o[n]=c[n](t),{c(){e=d("main"),r.c(),$(e,"class","container")},m(t,r){a(t,e,r),o[n].m(e,null),s=!0},p(t,[s]){let l=n;n=i(t),n===l?o[n].p(t,s):(B(),F(o[l],1,1,()=>{o[l]=null}),O(),r=o[n],r||(r=o[n]=c[n](t),r.c()),R(r,1),r.m(e,null))},i(t){s||(R(r),s=!0)},o(t){F(r),s=!1},d(t){t&&f(e),o[n].d()}}}function Jt(t,e,n){let r;l(t,Z,t=>n(0,r=t));let s,c=null;const{enabledMarkers:o,loopRange:i}=Y;function u(){Y.add(r.currentTime)}document.addEventListener("keyup",t=>{"Enter"===t.key&&r&&u()});return[r,function(t){var e;s&&s(),c=t.detail,Z.set(new Audio(URL.createObjectURL(c))),function(t){const e=localStorage.getItem(`track:${t}`);return e?e.split("|").map(t=>t.split(":")).map(([t,e])=>({time:Number(t),text:JSON.parse(e)})):[]}(c.name).forEach(({time:t,text:e})=>Y.add(t,e)),s=Y.subscribe((e=c.name,function(t){const n=t.map(({time:t,text:e})=>`${t}:${JSON.stringify(e)}`).join("|");localStorage.setItem(`track:${e}`,n)}))},function(){Z.reset(),s(),s=null,Y.set([])},u,c,s,o,i,t=>Z.playFromMarker(t.detail)]}return new class extends W{constructor(t){super(),P(this,t,Jt,Vt,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
